"use strict";let data={name:"",job:"",email:"",phone:"",linkedin:"",github:"",palette:"01",photo:""};const allLegends=document.querySelectorAll(".js-legend"),allArrows=document.querySelectorAll(".js_arrows"),previewName=document.querySelector(".js-preview_name"),previewJob=document.querySelector(".js-preview_job"),form=document.querySelector(".js-form"),previewHeaderStrip=document.querySelector(".js-card-preview-header"),socialMediaIcon=document.querySelectorAll(".socialmedia_icon"),socialMediaCircle=document.querySelectorAll(".card__socialmedia--item"),shareButton=document.querySelector(".js-buttonCard"),createdCard=document.querySelector(".js-createdCard"),createdCardLink=document.querySelector(".js_createdCard__link"),catchError=document.querySelector(".js_catchError"),twitterBtn=document.querySelector(".js-buttonLink"),fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview"),buttonReset=document.querySelector(".js-card_reset");for(const e of allLegends)e.addEventListener("click",handleClickAnyLegend),e.addEventListener("click",changeArrows);function handleClickAnyLegend(e){const t=e.currentTarget.id,r=document.querySelectorAll(".js_content");for(const e of r){e.id===t?e.classList.toggle("collapsed"):e.classList.add("collapsed")}}function changeArrows(e){for(const e of allArrows)e.classList.remove("fa-chevron-up"),e.classList.add("fa-chevron-down");e.currentTarget.children[1].classList.add("fa-chevron-up")}function renderInputs(){""!==data.photo?(profileImage.style.backgroundImage=`url(${data.photo})`,profilePreview.style.backgroundImage=`url(${data.photo})`):(profileImage.style.backgroundImage='url("https://www.fillmurray.com/240/200")',profilePreview.style.backgroundImage=""),""===data.name?previewName.innerHTML="Nombre Apellido":previewName.innerHTML=data.name,""===data.job?previewJob.innerHTML="Front-end developer":previewJob.innerHTML=data.job,setDataInLocalStorage()}function handleFill(e){const t=e.target.id,r=e.target.value;data[t]=r,renderInputs(data),setDataInLocalStorage()}form.addEventListener("keyup",handleFill);const paletteButtons=document.querySelectorAll(".js-sectionDesign input[name=colourpalette]");function handler(){const e=document.querySelector(".js-sectionDesign input[name=colourpalette]:checked").value;let t,r,a;"colours1"===e?(t="#114e4e",r="#438792",a="#a2deaf",data.palette="01"):"colours2"===e?(t="#420101",r="#bd1010",a="#e95626",data.palette="02"):"colours3"===e&&(t="#3e5b65",r="#eab052",a="#a0c0cf",data.palette="03");for(const e of socialMediaIcon)e.style.color=t;for(const e of socialMediaCircle)e.style.borderColor=a;previewHeaderStrip.style.borderColor=r,previewName.style.color=t,setDataInLocalStorage()}function handleClickButton(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{if(e.success){createdCardLink.innerHTML=e.cardURL,createdCardLink.href=""+e.cardURL;const t="Mira la tarjeta que me he creado!!!";twitterBtn.href=`https://twitter.com/intent/tweet?text=${t}&url=${e.cardURL}`,shareButton.classList.add("buttonCard--off"),shareButton.classList.remove("buttonCard--on"),createdCard.classList.remove("collapsed"),catchError.innerHTML=""}else catchError.innerHTML="Error: debes rellenar todos los campos"})}function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result,setDataInLocalStorage()}function setDataInLocalStorage(){localStorage.setItem("dataSaved",JSON.stringify(data))}function getDataFromLocalStorage(){const e=localStorage.getItem("dataSaved");if(null!==e){const t=JSON.parse(e);data=t,renderInputs()}}function handleClickReset(){document.querySelector(".js-form").reset(),data.name="",data.job="",data.email="",data.phone="",data.linkedin="",data.github="",data.photo="",data.palette="01";for(const e of paletteButtons)"colours1"===e.value?e.checked=!0:e.checked=!1;renderInputs()}paletteButtons.forEach(e=>{e.addEventListener("change",handler)}),shareButton.addEventListener("click",handleClickButton),fileField.addEventListener("change",getImage),getDataFromLocalStorage(),buttonReset.addEventListener("click",handleClickReset);